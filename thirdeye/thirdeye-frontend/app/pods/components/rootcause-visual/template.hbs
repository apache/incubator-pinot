<div class="card-container__body--padding-md card-container__body--flush-bottom">
  {{#if selectedUrns.size}}
    <div class="rootcause-wrapper">
      {{#if showLegend}}
        {{rootcause-legend
          entities=entities
          selectedUrns=selectedUrns
          invisibleUrns=invisibleUrns
          onVisibility=(action "onVisibility")
          onSelection=(action "onSelection")
          onMouseEnter=(action "onLegendHover")
          onMouseLeave=(action "onLegendHover")
          onPrimaryChange=(action "onPrimaryChange")
        }}
      {{/if}}
      <div class="rootcause-wrapper__chart">
        {{#if showToolbar}}
          <div class="row rootcause-wrapper__toolbar">
            {{rootcause-chart-toolbar
              context=context
              timeseriesMode=timeseriesMode
              onContext=(action "onContext")
              onChart=(action "onChart")
            }}
          </div>
        {{/if}}
        {{#if isLoadingTimeseries}}
          <div class="spinner-wrapper spinner-wrapper--card">
            {{ember-spinner}}
          </div>
        {{/if}}
        {{rootcause-chart
          entities=entities
          selectedUrns=chartSelectedUrns
          timeseries=timeseries
          timeseriesMode=timeseriesMode
          focusedUrns=focusedUrns
          context=context
          onHover=(action "chartOnHover")
          onSelection=(action "onSelection")
          onPrimaryChange=(action "onPrimaryChange")
        }}
      </div>
    </div>
    {{#if showSlider}}
      <div class="row rootcause-compare">
        {{rootcause-select-comparison-range
          granularity=context.granularity
          anomalyRange=context.anomalyRange
          displayRange=context.analysisRange
          compareMode=context.compareMode
          onChange=(action "onComparisonChange")
        }}
      </div>
    {{/if}}
  {{else}}
    <div class="card-container card-container--md card-container--flush-top">
      {{rootcause-placeholder
        message="Please select a metric and click on '+ add to chart' below. The root cause graph will load here."
        iconClass="glyphicon glyphicon-equalizer"}}
    </div>
  {{/if}}
</div>
