<div class="container">
  <h2 class="te-title">Summary</h2>
  <div class="paper-container">
    <div class="paper-container__body">
      <section class="rca-summary">
        <div class="row">
          <div class="col-xs-4">
            <label class="te-label" for="select-granularity">Granularity: </label>
            {{#power-select
              selected=uiGranularity
              options=granularities
              triggerId="select-granularity"
              onchange=(action "onGranularityChange") 
              searchEnabled=false
              as |granularity|
            }}
              {{granularity}}
            {{/power-select}}
          </div>
          <div class="col-xs-4">
            <label class="te-label" for="select-mode">Compare Mode: </label>
            {{#power-select
              selected=compareMode
              options=compareModeOptions
              triggerId="select-mode"
              searchEnabled=false
              onchange=(action "onModeChange")
              as |mode|
            }}
              {{mode}}
            {{/power-select}}
          </div>

          <div class="col-xs-4">
            <label class="te-label" for="select-anomaly-region">Analysis Region: </label>
            {{date-range-picker
              timePicker=true
              timePicker24Hour=true
              timePickerIncrement=5
              minDate=minDate
              maxDate=maxDate 
              start=anomalyRegionStart
              end=anomalyRegionEnd
              ranges=predefinedRanges
              showCustomRangeLabel=true
              format='MMM D, YYYY hh:mm a'
              serverFormat="YYYY-MM-DD HH:mm"
              applyAction=(action "onRegionChange")  
            }}
              {{!-- hideAction=(action "hideDatePicker")
              cancelAction=(action "cancelDatePicker") --}}
              {{!-- start=analysisStart
              end=analysisEnd --}}
          </div>
        </div>

        <div class="form-group">
          <label class="te-label" for="select-filters">Filters: </label>
          {{filter-select
            options=metricFilters
            selected=filters
            triggerId="select-filter"
          }}
        </div>
        <main class="paper-container">
          {{#containers/primary-metric-container as |summary actions|}}
            {{#if summary.loading}}
              <section class="paper-container">
                <div class="spinner-wrapper">
                  {{ember-spinner}}
                </div>
              </section>
            {{/if}}

            {{#if summary.loaded}}
              {{anomaly-graph 
                classNames='anomaly-graph--no-border'
                primaryMetric=summary.primaryMetric 
                showLegend=true
                showSubchart=true
                showGraphLegend=false
                showEvents=true
                showMetrics=true
                showDimensions=true
                onSelection=(action actions.onDeselect)
                onRegionBrush=(action "onRegionBrush")
                relatedMetrics=summary.selectedMetrics
                selectedMetrics=summary.selectedMetrics
                dimensions=summary.selectedDimensions
                selectedDimensions=summary.selectedDimensions
                events=summary.selectedEvents
                onSubchartChange=(action "setDateParams") 
                regionStart=analysisStart
                regionEnd=analysisEnd
                subchartStart=subchartStart
                subchartEnd=subchartEnd
              }}
                {{!-- analysisDate=(hash analysisStart=analysisStart analysisEnd=analysisEnd) --}}
            {{/if}}
          {{/containers/primary-metric-container}}
        </main>
      </section>
    </div>
  </div>

  <h2 class="te-title">Root Cause Analysis</h2>
  <div id="root-cause-analysis" class="paper-container">
    <div class="contribution-table__header">
      <div class="contribution-table__subnav">
        {{#link-to "rca.details.events" class="thirdeye-link thirdeye-link--nav" activeClass="thirdeye-link--active"}}
          Events Correlation 
        {{/link-to}}
      </div>
      <div class="contribution-table__subnav">
        {{#link-to "rca.details.dimensions" class="thirdeye-link thirdeye-link--nav" activeClass="thirdeye-link--active"}}
          Dimensions Analysis 
        {{/link-to}}
      </div>
      <div class="contribution-table__subnav">
        {{#link-to "rca.details.metrics" class="thirdeye-link thirdeye-link--nav" activeClass="thirdeye-link--active"}}
          Metrics Correlation 
        {{/link-to}}
      </div>
    </div>
     {{outlet}} 
  </div>
</div>